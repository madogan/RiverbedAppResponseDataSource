/*! For license information please see module.js.LICENSE.txt */
define(["@grafana/data","@grafana/runtime","@grafana/ui","lodash","react"],((e,t,r,n,o)=>(()=>{var a=[e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},t=>{"use strict";t.exports=e},(e,t,r)=>{var n=r(7),o=r(25),a=r(26),i="[object Null]",u="[object Undefined]",s=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?u:i:s&&s in Object(e)?o(e):a(e)}},(e,t,r)=>{var n=r(8),o="object"==typeof self&&self&&self.Object===Object&&self,a=n||o||Function("return this")();e.exports=a},e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},e=>{e.exports=function(e){return e}},(e,t,r)=>{var n=r(2),o=r(0),a="[object AsyncFunction]",i="[object Function]",u="[object GeneratorFunction]",s="[object Proxy]";e.exports=function(e){if(!o(e))return!1;var t=n(e);return t==i||t==u||t==a||t==s}},(e,t,r)=>{var n=r(3).Symbol;e.exports=n},(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},(e,t,r)=>{var n=r(6),o=r(11);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},e=>{var t=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=t}},e=>{var t=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var o=typeof e;return!!(n=null==n?t:n)&&("number"==o||"symbol"!=o&&r.test(e))&&e>-1&&e%1==0&&e<n}},(e,t,r)=>{e=r.nmd(e);var n=r(3),o=r(39),a=t&&!t.nodeType&&t,i=a&&e&&!e.nodeType&&e,u=i&&i.exports===a?n.Buffer:void 0,s=(u?u.isBuffer:void 0)||o;e.exports=s},(e,t,r)=>{e=r.nmd(e);var n=r(8),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,i=a&&a.exports===o&&n.process,u=function(){try{var e=a&&a.require&&a.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=u},(e,t,r)=>{var n=r(16),o=r(9),a=r(32),i=r(33),u=Object.prototype,s=u.hasOwnProperty,l=n((function(e,t){e=Object(e);var r=-1,n=t.length,l=n>2?t[2]:void 0;for(l&&a(t[0],t[1],l)&&(n=1);++r<n;)for(var c=t[r],p=i(c),h=-1,d=p.length;++h<d;){var f=p[h],v=e[f];(void 0===v||o(v,u[f])&&!s.call(e,f))&&(e[f]=c[f])}return e}));e.exports=l},(e,t,r)=>{var n=r(5),o=r(17),a=r(19);e.exports=function(e,t){return a(o(e,t,n),e+"")}},(e,t,r)=>{var n=r(18),o=Math.max;e.exports=function(e,t,r){return t=o(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,u=o(a.length-t,0),s=Array(u);++i<u;)s[i]=a[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=a[i];return l[t]=r(s),n(e,this,l)}}},e=>{e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},(e,t,r)=>{var n=r(20),o=r(31)(n);e.exports=o},(e,t,r)=>{var n=r(21),o=r(22),a=r(5),i=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:a;e.exports=i},e=>{e.exports=function(e){return function(){return e}}},(e,t,r)=>{var n=r(23),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},(e,t,r)=>{var n=r(24),o=r(30);e.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},(e,t,r)=>{var n=r(6),o=r(27),a=r(0),i=r(29),u=/^\[object .+?Constructor\]$/,s=Function.prototype,l=Object.prototype,c=s.toString,p=l.hasOwnProperty,h=RegExp("^"+c.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||o(e))&&(n(e)?h:u).test(i(e))}},(e,t,r)=>{var n=r(7),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,u=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,u),r=e[u];try{e[u]=void 0;var n=!0}catch(e){}var o=i.call(e);return n&&(t?e[u]=r:delete e[u]),o}},e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},(e,t,r)=>{var n,o=r(28),a=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!a&&a in e}},(e,t,r)=>{var n=r(3)["__core-js_shared__"];e.exports=n},e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},e=>{var t=800,r=16,n=Date.now;e.exports=function(e){var o=0,a=0;return function(){var i=n(),u=r-(i-a);if(a=i,u>0){if(++o>=t)return arguments[0]}else o=0;return e.apply(void 0,arguments)}}},(e,t,r)=>{var n=r(9),o=r(10),a=r(12),i=r(0);e.exports=function(e,t,r){if(!i(r))return!1;var u=typeof t;return!!("number"==u?o(r)&&a(t,r.length):"string"==u&&t in r)&&n(r[t],e)}},(e,t,r)=>{var n=r(34),o=r(43),a=r(10);e.exports=function(e){return a(e)?n(e,!0):o(e)}},(e,t,r)=>{var n=r(35),o=r(36),a=r(38),i=r(13),u=r(12),s=r(40),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=a(e),c=!r&&o(e),p=!r&&!c&&i(e),h=!r&&!c&&!p&&s(e),d=r||c||p||h,f=d?n(e.length,String):[],v=f.length;for(var m in e)!t&&!l.call(e,m)||d&&("length"==m||p&&("offset"==m||"parent"==m)||h&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||u(m,v))||f.push(m);return f}},e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},(e,t,r)=>{var n=r(37),o=r(4),a=Object.prototype,i=a.hasOwnProperty,u=a.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(e){return o(e)&&i.call(e,"callee")&&!u.call(e,"callee")};e.exports=s},(e,t,r)=>{var n=r(2),o=r(4),a="[object Arguments]";e.exports=function(e){return o(e)&&n(e)==a}},e=>{var t=Array.isArray;e.exports=t},e=>{e.exports=function(){return!1}},(e,t,r)=>{var n=r(41),o=r(42),a=r(14),i=a&&a.isTypedArray,u=i?o(i):n;e.exports=u},(e,t,r)=>{var n=r(2),o=r(11),a=r(4),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&o(e.length)&&!!i[n(e)]}},e=>{e.exports=function(e){return function(t){return e(t)}}},(e,t,r)=>{var n=r(0),o=r(44),a=r(45),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return a(e);var t=o(e),r=[];for(var u in e)("constructor"!=u||!t&&i.call(e,u))&&r.push(u);return r}},e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},e=>{e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},e=>{"use strict";e.exports=o},e=>{"use strict";e.exports=r},,e=>{"use strict";e.exports=t},e=>{"use strict";e.exports=n}],i={};function u(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={id:e,loaded:!1,exports:{}};return a[e](r,r.exports,u),r.loaded=!0,r.exports}u.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return u.d(t,{a:t}),t},u.d=(e,t)=>{for(var r in t)u.o(t,r)&&!u.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},u.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var s={};return(()=>{"use strict";u.r(s),u.d(s,{plugin:()=>ee});var e,t=u(1),r=u(15),n=u.n(r),o=u(49);!function(e){e.ip="IP",e.webApp="Web App",e.hostGroup="Host Group",e.application="Application",e.ssl="SSL",e.alerts="Alerts"}(e||(e={}));var a=[{label:"Application",value:e.application},{label:"Host Group",value:e.hostGroup},{label:"Web App",value:e.webApp},{label:"IP",value:e.ip},{label:"SSL",value:e.ssl},{label:"Alerts",value:e.alerts}],i=[{value:0,label:"Auto"},{value:60,label:"60 seconds"},{value:300,label:"5 minutes"},{value:3600,label:"1 hour"},{value:21600,label:"6 hours"},{value:86400,label:"1 day"}],l=[{label:"Status",value:"status",type:t.FieldType.string},{label:"Subject Common Name",value:"subject.common_name",type:t.FieldType.string},{label:"Subject Organization",value:"subject.organization",type:t.FieldType.string},{label:"Issuer Common Name",value:"issuer.common_name",type:t.FieldType.string},{label:"Issuer Organization",value:"issuer.organization",type:t.FieldType.string},{label:"Valid From",value:"valid_from",type:t.FieldType.time},{label:"Valid To",value:"valid_to",type:t.FieldType.time},{label:"First Seen",value:"first_seen",type:t.FieldType.time},{label:"Last Seen",value:"last_seen",type:t.FieldType.time},{label:"Expiration Time",value:"expiration_time",type:t.FieldType.number}],c=[{name:"Severity",label:"Severity",value:"alert.severity_level_name",type:"string"},{name:"Alert Ongoing",label:"Alert Ongoing",value:"alert.ongoing_name",type:"string"},{name:"Policy Name",label:"Policy Name",value:"alert.policy_name",type:"string"},{name:"Policy Description",label:"Policy Description",value:"alert.policy_description",type:"string"},{name:"Policy Type",label:"Policy Type",value:"alert.policy_type_name",type:"string"},{name:"Alert Violations Preview (Resolved)",label:"Alert Violations Preview (Resolved)",value:"alert.violations_preview_resolved",type:"string"},{name:"Duration",label:"Duration",value:"alert.duration",type:"string"},{name:"Alert Start Time",label:"Start Time",value:"alert.start_time",type:"time"},{name:"Alert End time",label:"Alert End time",value:"alert.end_time",type:"time"}],p={timeshift:0,granularity:i[0],sourceGroup:e.application,top:!1,topN:10,topGraph:!1,sslKeys:[],currentSSLKeyColumns:l,expirationTime:-1,webApps:[],webAppMetrics:[],hostGroups:[],hostGroupMetrics:[],applications:[],applicationMetrics:[],alertLimit:10,alertColumns:c,currentAlertsColumns:c};function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function f(){f=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),u=new A(o||[]);return n(i,"_invoke",{value:S(e,r,u)}),i}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var p={};function d(){}function v(){}function m(){}var y={};s(y,a,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(G([])));b&&b!==t&&r.call(b,a)&&(y=b);var w=m.prototype=d.prototype=Object.create(y);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function o(n,a,i,u){var s=c(e[n],e,a);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==h(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){o("next",e,i,u)}),(function(e){o("throw",e,i,u)})):t.resolve(p).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function S(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return M()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var u=C(i,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=c(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function C(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=c(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function G(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:M}}function M(){return{value:void 0,done:!0}}return v.prototype=m,n(w,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:v,configurable:!0}),v.displayName=s(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,s(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},E(x.prototype),s(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new x(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=G,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:G(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function v(e,t,r,n,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,o)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){v(a,n,o,i,u,"next",e)}function u(e){v(a,n,o,i,u,"throw",e)}i(void 0)}))}}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E(e);if(t){var o=E(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}(this,r)}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function x(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}var C,T,_=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(I,r);var a,u,s,l,c,h,v,E,S,C,T,_,A,G,M,j,F,k,P,O=b(I);function I(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,I),x(w(t=O.call(this,e)),"token",void 0),x(w(t),"url",void 0),x(w(t),"headers",void 0),x(w(t),"urls",void 0),x(w(t),"settings",void 0),x(w(t),"data",[]),x(w(t),"sslKeys",[]),x(w(t),"ipMetrics",[]),x(w(t),"topMetrics",[]),x(w(t),"webApps",[]),x(w(t),"webAppMetrics",[]),x(w(t),"hostGroups",[]),x(w(t),"hostGroupMetrics",[]),x(w(t),"applications",[]),x(w(t),"applicationMetrics",[]),x(w(t),"alerts",[]),x(w(t),"lastFetchQuery",void 0),x(w(t),"lastFetchMetrics",void 0),x(w(t),"lastFetchWebApps",void 0),x(w(t),"lastFetchWebAppMetrics",void 0),x(w(t),"lastFetchHostGroups",void 0),x(w(t),"lastFetchHostGroupMetrics",void 0),x(w(t),"lastFetchApplications",void 0),x(w(t),"lastFetchApplicationMetrics",void 0),x(w(t),"lastFetchIPMetrics",void 0),x(w(t),"lastFetchSSLKeys",void 0),x(w(t),"lastFetchAlerts",void 0),x(w(t),"lastFetchAlertColumns",void 0),x(w(t),"alertColumns",[]),x(w(t),"queryTimeout",60),x(w(t),"optionsTimeout",15),t.settings=e,t.url=t.settings.url||"",t.urls={base:t.url+"/base",auth:t.url+"/auth",ssl:t.url+"/ssl",webApp:t.url+"/webapps",metric:t.url+"/aggregates",hostGroup:t.url+"/hostgroups",application:t.url+"/applications",instanceCreationSync:t.url+"/instancecreationsync",alerts:t.url+"/alerts"},t.headers={"Content-Type":"application/json"},t.lastFetchQuery=new Date,t.lastFetchMetrics=new Date,t.lastFetchWebApps=new Date,t.lastFetchWebAppMetrics=new Date,t.lastFetchHostGroups=new Date,t.lastFetchHostGroupMetrics=new Date,t.lastFetchApplications=new Date,t.lastFetchApplicationMetrics=new Date,t.lastFetchIPMetrics=new Date,t.lastFetchSSLKeys=new Date,t.lastFetchAlerts=new Date,t.lastFetchAlertColumns=new Date,t}return a=I,u=[{key:"topngraphquery",value:(P=m(f().mark((function t(r,n,o,a){var i,u,s,l,c,p;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=[],s=[],u=[{direction:"desc",id:r.currentTopMetric.value}],r.sourceGroup!==e.application){t.next=8;break}s=["app.id","app.name"],i=["start_time","app.id"],t.next=24;break;case 8:if(r.sourceGroup!==e.hostGroup){t.next=13;break}s=["host_group.id","host_group.name"],i=["start_time","host_group.id"],t.next=24;break;case 13:if(r.sourceGroup!==e.webApp){t.next=18;break}s=["app.id","app.name"],i=["start_time","app.id"],t.next=24;break;case 18:if(r.sourceGroup!==e.ip){t.next=23;break}s=["tcp.ip","tcp.dns"],i=["start_time","tcp.ip"],t.next=24;break;case 23:throw new Error("Unknown source group");case 24:return s.push(r.currentTopMetric.value),l=[],c="",t.next=29,this.doRequest({method:"POST",url:this.urls.instanceCreationSync,data:{data_defs:[{source:{name:"aggregates"},time:{start:n.toString(),end:o.toString(),granularity:a.toString()},top_by:u,columns:s,limit:r.topN||10}]}}).then((function(e){var t;t=e.data.data_defs[0].hasOwnProperty("data")?e.data.data_defs[0].data:[];for(var r=0;r<t.length;r++)l.push(t[r][1]),r===t.length-1?c+="'".concat(t[r][0],"'"):c+="'".concat(t[r][0],"', ");return c}));case 29:return s.unshift("start_time"),t.next=32,this.doRequest({method:"POST",url:this.urls.instanceCreationSync,data:{data_defs:[{source:{name:"aggregates"},time:{start:n.toString(),end:o.toString(),granularity:a.toString()},group_by:i,columns:s,filters:[{type:"STEELFILTER",value:"".concat(s[1]," IN (").concat(c,")")}]}]}}).then((function(e){return e.data.data_defs[0].hasOwnProperty("data")?e.data:[]}));case 32:return p=t.sent,t.abrupt("return",{tops:l,result:p});case 34:case"end":return t.stop()}}),t,this)}))),function(e,t,r,n){return P.apply(this,arguments)})},{key:"query",value:(k=m(f().mark((function r(o){var a,u,s,l,c,h,d,v,m,y,g,b,w=this;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=o.range,u=a.to.valueOf(),s=a.from.valueOf(),d={},v={},m=[],g=[],b=o.targets.map((function(r){var o,a,f,b,E,x=n()(r,p);if(l=new Date(u).getTime()/1e3,c=new Date(s).getTime()/1e3,0===(null===(o=h=x.granularity)||void 0===o?void 0:o.value)){var S=(l-c)/60;h=S<60?i[1]:S<360?i[2]:S<7200?i[3]:S<86400?i[4]:i[5]}if(d={name:"aggregates"},x.sourceGroup===e.alerts)return w.getAlerts(x.currentAlertsColumns,c,l,null===(f=h)||void 0===f?void 0:f.value,x.alertLimit).then((function(e){for(var r,n=[],o=0;o<x.currentAlertsColumns.length;o++)n.push({type:x.currentAlertsColumns[o].type,name:x.currentAlertsColumns[o].label,value:x.currentAlertsColumns[o].value});r=new t.MutableDataFrame({fields:n,name:"Alerts",refId:x.refId});for(var a=0;a<e.length;a++){for(var i=[],u=e[a],s=0;s<n.length;s++)i.push(u[n[s].value]);r.appendRow(i)}return r}));if(x.sourceGroup===e.ssl)return w.getSSLKeys().then((function(e){for(var r,n=[],o=0;o<x.currentSSLKeyColumns.length;o++)n.push({type:x.currentSSLKeyColumns[o].type,name:x.currentSSLKeyColumns[o].label,value:x.currentSSLKeyColumns[o].value});r=new t.MutableDataFrame({fields:n,name:"SSL Keys",refId:x.refId});for(var a=0;a<e.length;a++){var i=[],u=e[a];if(u.valid_from>=new Date(1e3*c)&&u.valid_to<=new Date(1e3*l))if(u.expiration_time=parseInt(((u.valid_to.getTime()-(new Date).getTime())/864e5).toString(),10),x.expirationTime>-1){if(u.expiration_time<x.expirationTime){for(var s=0;s<n.length;s++)i.push(u[n[s].value]);r.appendRow(i)}}else{for(var p=0;p<n.length;p++)i.push(u[n[p].value]);r.appendRow(i)}}return r}));if(x.sourceGroup===e.hostGroup)v=["start_time","host_group.id"],m=["start_time","host_group.id","host_group.name"],g.push({type:"STEELFILTER",value:"host_group.id == "+(null===(b=x.currentHostGroup)||void 0===b?void 0:b.value)}),m.push(null===(E=x.currentHostGroupMetric)||void 0===E?void 0:E.value),y=x.currentHostGroupMetric;else if(x.sourceGroup===e.application){var C,T;v=["start_time","app.id"],m=["start_time","app.id","app.name"],g.push({type:"STEELFILTER",value:"app.id == "+(null===(C=x.currentApplication)||void 0===C?void 0:C.value)}),m.push(null===(T=x.currentApplicationMetric)||void 0===T?void 0:T.value),y=x.currentApplicationMetric}else if(x.sourceGroup===e.ip){var _;d={name:"aggregates"},v=["start_time"],m=["start_time","tcp.ip","tcp.dns"],g.push({type:"STEELFILTER",value:"tcp.ip == "+x.currentIP}),m.push(null===(_=x.currentIPMetric)||void 0===_?void 0:_.value),y=x.currentIPMetric}else{if(x.sourceGroup!==e.webApp)throw new Error("Unknown source group");var A,G;v=["start_time","app.id"],m=["start_time","app.id","app.name"],g.push({type:"STEELFILTER",value:"app.id == "+(null===(A=x.currentWebApp)||void 0===A?void 0:A.value)}),m.push(null===(G=x.currentWebAppMetric)||void 0===G?void 0:G.value),y=x.currentWebAppMetric}var M,j={source:d,time:{end:l.toString(),start:c.toString(),granularity:null===(a=h)||void 0===a?void 0:a.value.toString()},group_by:v,columns:m};if(x.top){if(j.limit=x.topN||10,j.top_by=[{id:null===(M=y)||void 0===M?void 0:M.value,direction:"desc"}],j.group_by={},j.columns=j.columns.slice(1),x.topGraph)return w.topngraphquery(x,c,l,0).then((function(e){var r,n,o=e.tops,a=e.result.data_defs[0];a.hasOwnProperty("data")||(a.data=[]),r=void 0!==x.alias&&""!==x.alias.trim()?x.alias:null===(n=x.currentTopMetric)||void 0===n?void 0:n.label;for(var i=[{name:"Time",type:t.FieldType.time,values:[]}],u=0;u<o.length;u++)i.push({name:o[u],type:t.FieldType.number,values:[]});for(var s=new t.MutableDataFrame({name:r,fields:i,refId:x.refId}),l=0;l<a.data.length;l++){var c=[],p=a.data[l];c.push(new Date(1e3*p[0]));for(var h=0;h<o.length;h++)o[h]===p[2]?c.push(p[p.length-1]):c.push(null);s.appendRow(c)}return s}))}else j.filters=g;return w.doRequest({url:w.urls.instanceCreationSync,data:{data_defs:[j]},method:"POST"}).then((function(e){var r,n,o=null==e?void 0:e.data.data_defs[0];void 0===o.data&&(o.data=[]),r=void 0!==x.alias&&""!==x.alias.trim()?x.alias:null===(n=y)||void 0===n?void 0:n.value;var a,i=[];if(x.top){for(var u=[],s=0;s<o.columns.length;s++){var l=o.columns[s];-1===l.search("id")?i.push({name:l,type:t.FieldType.other}):u.push(s)}a=new t.MutableDataFrame({refId:x.refId,name:r,fields:i});for(var c=function(e){u.forEach((function(t){o.data[e].splice(t,1)})),a.appendRow(o.data[e])},p=0;p<o.data.length;p++)c(p)}else{i=[{name:"Time",type:t.FieldType.time},{name:"Value",type:t.FieldType.number}],a=new t.MutableDataFrame({refId:x.refId,name:r,fields:i});for(var h=0;h<o.data.length;h++){var d=o.data[h];a.appendRow([new Date(1e3*d[0]),d[d.length-1]])}}return w.data.push(a),a}))})),r.abrupt("return",Promise.all(b).then((function(e){return{data:e}})));case 9:case"end":return r.stop()}}),r)}))),function(e){return k.apply(this,arguments)})},{key:"testDatasource",value:(F=m(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.getBackendSrv)().datasourceRequest({method:"POST",url:this.urls.auth,headers:this.headers}).then((function(e){return!0===e.ok?(t.settings.jsonData.token=e.data.access_token,{status:"success",message:"Data source is working"}):{status:"error",message:"Data source is not working"}})).catch((function(e){return{status:"error",message:e.statusText}})));case 1:case"end":return e.stop()}}),e,this)}))),function(){return F.apply(this,arguments)})},{key:"authRequest",value:(j=m(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.getBackendSrv)().datasourceRequest({method:"POST",url:this.urls.auth}).then((function(e){t.settings.jsonData.token=e.data.access_token}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return j.apply(this,arguments)})},{key:"doRequest",value:(M=m(f().mark((function e(t){var r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.settings.jsonData.token){e.next=5;break}return e.next=5,this.authRequest();case 5:return e.abrupt("return",(0,o.getBackendSrv)().datasourceRequest(d({},t,{headers:d({},this.headers,{Authorization:"Bearer "+this.settings.jsonData.token})})).catch((function(e){if(e.data.message.includes("Authentication to data source failed"))return r.settings.jsonData.token="",r.doRequest(t);throw e})));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return M.apply(this,arguments)})},{key:"getHostGroups",value:(G=m(f().mark((function e(){var t,r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],e.prev=2,!((Date.now()-this.lastFetchHostGroups.getTime())/1e3/60<this.optionsTimeout&&this.hostGroups.length>0)){e.next=6;break}return e.abrupt("return",this.hostGroups);case 6:return e.next=8,this.doRequest({method:"GET",url:this.urls.hostGroup}).then((function(e){if(r.hostGroups=[],void 0!==e)for(var n in e.data.items)if(e.data.items[n].enabled){var o={label:e.data.items[n].name,value:e.data.items[n].id};t.push(o),r.hostGroups.push(o)}r.lastFetchHostGroups=new Date(Date.now())}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2);case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[2,10]])}))),function(){return G.apply(this,arguments)})},{key:"getApplications",value:(A=m(f().mark((function e(){var t,r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],e.prev=1,!((Date.now()-this.lastFetchApplications.getTime())/1e3/60<this.optionsTimeout&&this.applications.length>0)){e.next=5;break}return e.abrupt("return",this.applications);case 5:return e.next=7,this.doRequest({method:"GET",url:this.urls.application}).then((function(e){if(void 0!==e)for(var n in r.applications=[],e.data.items)if(e.data.items[n].enabled){var o={label:e.data.items[n].name,value:e.data.items[n].id};t.push(o),r.applications.push(o)}r.lastFetchApplications=new Date(Date.now())}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1);case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return A.apply(this,arguments)})},{key:"getWebApps",value:(_=m(f().mark((function e(){var t,r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],e.prev=1,!((Date.now()-this.lastFetchWebApps.getTime())/1e3/60<this.optionsTimeout&&this.webApps.length>0)){e.next=5;break}return e.abrupt("return",this.webApps);case 5:return e.next=7,this.doRequest({method:"GET",url:this.urls.webApp}).then((function(e){if(void 0!==e)for(var n in r.webApps=[],e.data.items)if(e.data.items[n].enabled){var o={label:e.data.items[n].name,value:e.data.items[n].id};t.push(o),r.webApps.push(o)}r.lastFetchWebApps=new Date(Date.now())}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1);case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return _.apply(this,arguments)})},{key:"getTopMetrics",value:(T=m(f().mark((function t(r){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r!==e.application){t.next=6;break}return t.next=3,this.getApplicationMetrics();case 3:case 9:case 15:case 21:this.topMetrics=t.sent,t.next=25;break;case 6:if(r!==e.hostGroup){t.next=12;break}return t.next=9,this.getHostGroupMetrics();case 12:if(r!==e.webApp){t.next=18;break}return t.next=15,this.getWebAppMetrics();case 18:if(r!==e.ip){t.next=24;break}return t.next=21,this.getIPMetrics();case 24:throw new Error("Unknown source group");case 25:return t.abrupt("return",this.topMetrics);case 26:case"end":return t.stop()}}),t,this)}))),function(e){return T.apply(this,arguments)})},{key:"getApplicationMetrics",value:(C=m(f().mark((function e(){var t,r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],e.prev=1,!((Date.now()-this.lastFetchApplicationMetrics.getTime())/1e3/60<this.optionsTimeout&&this.applicationMetrics.length>0)){e.next=5;break}return e.abrupt("return",this.applicationMetrics);case 5:return e.next=7,this.doRequest({method:"GET",url:this.urls.metric}).then((function(e){if(void 0!==e)for(var n in r.applicationMetrics=[],e.data.columns){var o=e.data.columns[n].id,a=e.data.columns[n].unit,i=e.data.columns[n].rate,u=e.data.columns[n].label;if(!(o.endsWith(".id")||o.endsWith("_id")||o.endsWith(".id")||o.endsWith(".name")||o.endsWith("_name")||o.endsWith(".ip")||o.endsWith("_ip")||o.endsWith(".url")||o.endsWith("_url")||o.endsWith(".type")||o.endsWith("_type")||o.endsWith(".dns")||o.endsWith("_dns")||o.endsWith("start_time")||o.endsWith("end_time")||o.includes("rtp"))){void 0!==i&&"none"!==a?u="".concat(u," (").concat(a,"/").concat(i,")"):void 0!==i&&(u="".concat(u," (").concat(i,")"));var s={value:o,label:u};o.includes("p2m")||o.includes("m2p")||o.includes("web")||o.includes("_db.")||o.includes("cxa")||(t.push(s),r.applicationMetrics.push(s))}}r.lastFetchApplicationMetrics=new Date(Date.now())}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1);case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return C.apply(this,arguments)})},{key:"getIPMetrics",value:(S=m(f().mark((function e(){var t,r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],e.prev=1,!((Date.now()-this.lastFetchIPMetrics.getTime())/1e3/60<this.optionsTimeout&&this.ipMetrics.length>0)){e.next=5;break}return e.abrupt("return",this.ipMetrics);case 5:return e.next=7,this.doRequest({method:"GET",url:this.urls.metric}).then((function(e){if(void 0!==e)for(var n in r.ipMetrics=[],e.data.columns){var o=e.data.columns[n].id,a=e.data.columns[n].unit,i=e.data.columns[n].rate,u=e.data.columns[n].label;if(!(o.endsWith(".id")||o.endsWith("_id")||o.endsWith(".id")||o.endsWith(".name")||o.endsWith("_name")||o.endsWith(".ip")||o.endsWith("_ip")||o.endsWith(".url")||o.endsWith("_url")||o.endsWith(".type")||o.endsWith("_type")||o.endsWith(".dns")||o.endsWith("_dns")||o.endsWith("start_time")||o.endsWith("end_time")||o.includes("rtp"))){void 0!==i&&"none"!==a?u="".concat(u," (").concat(a,"/").concat(i,")"):void 0!==i&&(u="".concat(u," (").concat(i,")"));var s={value:o,label:u};o.includes("p2m")||o.includes("m2p")||o.includes("web")||o.includes("_db.")||o.includes("cxa")||(t.push(s),r.ipMetrics.push(s))}}r.lastFetchIPMetrics=new Date(Date.now())}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1);case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return S.apply(this,arguments)})},{key:"getHostGroupMetrics",value:(E=m(f().mark((function e(){var t,r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],e.prev=1,!((Date.now()-this.lastFetchHostGroupMetrics.getTime())/1e3/60<this.optionsTimeout&&this.hostGroupMetrics.length>0)){e.next=5;break}return e.abrupt("return",this.hostGroupMetrics);case 5:return e.next=7,this.doRequest({method:"GET",url:this.urls.metric}).then((function(e){if(void 0!==e)for(var n in r.hostGroupMetrics=[],e.data.columns){var o=e.data.columns[n].id,a=e.data.columns[n].unit,i=e.data.columns[n].rate,u=e.data.columns[n].label;if(!(o.endsWith(".id")||o.endsWith("_id")||o.endsWith(".id")||o.endsWith(".name")||o.endsWith("_name")||o.endsWith(".ip")||o.endsWith("_ip")||o.endsWith(".url")||o.endsWith("_url")||o.endsWith(".type")||o.endsWith("_type")||o.endsWith(".dns")||o.endsWith("_dns")||o.endsWith("start_time")||o.endsWith("end_time")||o.includes("rtp"))){void 0!==i&&"none"!==a?u="".concat(u," (").concat(a,"/").concat(i,")"):void 0!==i&&(u="".concat(u," (").concat(i,")"));var s={value:o,label:u};t.push(s),r.hostGroupMetrics.push(s)}}r.lastFetchHostGroupMetrics=new Date(Date.now())}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1);case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return E.apply(this,arguments)})},{key:"getWebAppMetrics",value:(v=m(f().mark((function e(){var t,r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],e.prev=1,!((Date.now()-this.lastFetchWebAppMetrics.getTime())/1e3/60<this.optionsTimeout&&this.webAppMetrics.length>0)){e.next=5;break}return e.abrupt("return",this.webAppMetrics);case 5:return e.next=7,this.doRequest({method:"GET",url:this.urls.metric}).then((function(e){if(void 0!==e)for(var n in r.webAppMetrics=[],e.data.columns){var o=e.data.columns[n].id,a=e.data.columns[n].unit,i=e.data.columns[n].rate,u=e.data.columns[n].label;if(!(o.endsWith(".id")||o.endsWith("_id")||o.endsWith(".id")||o.endsWith(".name")||o.endsWith("_name")||o.endsWith(".ip")||o.endsWith("_ip")||o.endsWith(".url")||o.endsWith("_url")||o.endsWith(".type")||o.endsWith("_type")||o.endsWith(".dns")||o.endsWith("_dns")||o.endsWith("start_time")||o.endsWith("end_time")||o.includes("rtp"))){void 0!==i&&"none"!==a?u="".concat(u," (").concat(a,"/").concat(i,")"):void 0!==i&&(u="".concat(u," (").concat(i,")"));var s={value:o,label:u};o.includes("_web.")&&(t.push(s),r.webAppMetrics.push(s))}}r.lastFetchWebAppMetrics=new Date(Date.now())}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1);case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(){return v.apply(this,arguments)})},{key:"getAlertColumns",value:(h=m(f().mark((function e(){var r,n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],e.prev=2,!((Date.now()-this.lastFetchAlertColumns.getTime())/1e3/60<this.optionsTimeout&&this.alertColumns.length>0)){e.next=6;break}return e.abrupt("return",this.alertColumns);case 6:return e.next=8,this.doRequest({method:"GET",url:this.urls.alerts+"/columns"}).then((function(e){if(void 0!==e)for(var o in n.alertColumns=[],e.data.items){var a=e.data.items[o],i="";i="none"!==a.unit?"".concat(a.label," (").concat(a.unit,")"):a.label;var u={value:a.id,label:a.label,name:i,type:(s=a.type,"timestamp"===s?t.FieldType.time:"integer"===s?t.FieldType.number:t.FieldType.string)};r.push(u),n.alertColumns.push(u)}var s}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2);case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,this,[[2,10]])}))),function(){return h.apply(this,arguments)})},{key:"getAlerts",value:(c=m(f().mark((function e(t,r,n,o){var a,i,u=this,s=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>4&&void 0!==s[4]?s[4]:10,i=[],e.prev=5,!((Date.now()-this.lastFetchAlerts.getTime())/1e3<10&&this.alerts.length>0)){e.next=9;break}return e.abrupt("return",this.alerts);case 9:return e.next=12,this.doRequest({method:"POST",url:this.urls.instanceCreationSync,data:{data_defs:[{source:{name:"alert_list"},limit:Number.parseInt(a.toString(),10),time:{start:r.toString(),end:n.toString(),granularity:o.toString()},columns:t.map((function(e){return e.value}))}]}}).then((function(e){if(void 0!==e)for(var t in u.alerts=[],e.data.data_defs[0].data){for(var r=e.data.data_defs[0].data[t],n={},o=0;o<e.data.data_defs[0].columns.length;o++){var a=r[o],s=e.data.data_defs[0].columns[o];s.includes("time")&&(a=new Date(1e3*Number.parseFloat(a))),n[s]=a}i.push(n),u.alerts.push(n)}u.lastFetchAlerts=new Date(Date.now())}));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5);case 17:return e.abrupt("return",i);case 19:case"end":return e.stop()}}),e,this,[[5,14]])}))),function(e,t,r,n){return c.apply(this,arguments)})},{key:"getSSLKeys",value:(l=m(f().mark((function e(){var t,r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],e.prev=1,!((Date.now()-this.lastFetchSSLKeys.getTime())/1e3/60<this.optionsTimeout&&this.sslKeys.length>0)){e.next=6;break}return e.abrupt("return",this.sslKeys);case 6:return e.next=8,this.doRequest({method:"GET",url:this.urls.ssl}).then((function(e){if(void 0!==e){r.sslKeys=[];for(var n=0;n<e.data.items.length;n++){var o=e.data.items[n],a={status:o.status,"subject.common_name":o.subject.common_name,"subject.organization":o.subject.organization,"issuer.common_name":o.issuer.common_name,"issuer.organization":o.issuer.organization,serial_number:o.serial_number.toString(),valid_from:new Date(1e3*o.valid_from),valid_to:new Date(1e3*o.valid_to),first_seen:new Date(1e3*o.first_seen),last_seen:new Date(1e3*o.last_seen)};t.push(a),r.sslKeys.push(a)}}r.lastFetchSSLKeys=new Date(Date.now())}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1);case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(){return l.apply(this,arguments)})}],u&&y(a.prototype,u),s&&y(a,s),Object.defineProperty(a,"prototype",{writable:!1}),I}(t.DataSourceApi),A=u(46),G=u.n(A),M=u(47);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F.apply(this,arguments)}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R(n.key),n)}}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=L(e);if(t){var o=L(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return I(e)}(this,r)}}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function W(e,t,r){return(t=R(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e){var t=function(e,t){if("object"!==j(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===j(t)?t:String(t)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(a,e);var t,r,n,o=O(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return W(I(e=o.call.apply(o,[this].concat(r))),"_onOptionsChange",(function(t){var r=e.props;return(0,r.onOptionsChange)(F({},r.options,t))})),W(I(e),"onPathChange",(function(t){var r=e.props,n=r.onOptionsChange,o=r.options,a=F({},o.jsonData,{path:t.target.value});n(F({},o,{jsonData:a}))})),W(I(e),"onTlsSkipVerifyChange",(function(t){var r=e.props,n=r.onOptionsChange,o=r.options,a=F({},o.jsonData,{tlsSkipVerify:t.target.checked,skipTlsVerify:t.target.checked});n(F({},o,{jsonData:a}))})),W(I(e),"onUsernameChange",(function(t){var r=e.props,n=r.onOptionsChange,o=r.options,a=F({},o.jsonData,{username:t.target.value});n(F({},o,{jsonData:a}))})),W(I(e),"onPasswordChange",(function(t){var r=e.props;(0,r.onOptionsChange)(F({},r.options,{secureJsonData:{password:t.target.value}}))})),W(I(e),"onResetPassword",(function(){var t=e.props,r=t.onOptionsChange,n=t.options;r(F({},n,{secureJsonFields:F({},n.secureJsonFields,{password:!1}),secureJsonData:F({},n.secureJsonData,{password:""})}))})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.options,t=e.secureJsonFields,r=M.LegacyForms.Input,n=M.LegacyForms.SecretFormField,o=e.secureJsonData||{};return G().createElement("div",null,G().createElement("div",{className:"gf-form-inline"},G().createElement("div",{className:"gf-form"},C||(C=G().createElement(M.InlineFormLabel,{className:"width-10"},"Path")),G().createElement("div",{className:"width-10"},G().createElement(r,{className:"width-20",value:e.jsonData.path||"",onChange:this.onPathChange})))),G().createElement("div",{className:"gf-form-inline"},G().createElement("div",{className:"gf-form"},T||(T=G().createElement(M.InlineFormLabel,{className:"width-10"},"User")),G().createElement("div",{className:"width-10"},G().createElement(r,{className:"width-20",value:e.jsonData.username||"",onChange:this.onUsernameChange})))),G().createElement("div",{className:"gf-form-inline"},G().createElement("div",{className:"gf-form"},G().createElement(n,{isConfigured:t&&t.password,value:o.password||"",label:"Password","aria-label":"Password",labelWidth:10,inputWidth:20,onReset:this.onResetPassword,onChange:this.onPasswordChange}))),G().createElement("div",{className:"gf-form-inline"},G().createElement("div",{className:"gf-form"},G().createElement(M.InlineFieldRow,null,G().createElement(M.InlineField,{label:"Skip TLS Verify"},G().createElement(M.InlineSwitch,{value:e.jsonData.tlsSkipVerify||e.jsonData.skipTlsVerify,checked:e.jsonData.tlsSkipVerify||e.jsonData.skipTlsVerify,onChange:this.onTlsSkipVerifyChange}))))))}}])&&k(t.prototype,r),n&&k(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(A.PureComponent),N=u(50);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function H(){H=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),u=new T(o||[]);return n(i,"_invoke",{value:E(e,r,u)}),i}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var p={};function h(){}function d(){}function f(){}var v={};s(v,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(_([])));y&&y!==t&&r.call(y,a)&&(v=y);var g=f.prototype=h.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,u){var s=c(e[n],e,a);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==q(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){o("next",e,i,u)}),(function(e){o("throw",e,i,u)})):t.resolve(p).then((function(e){l.value=e,i(l)}),(function(e){return o("throw",e,i,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return A()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var u=x(i,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=c(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function x(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=c(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return d.prototype=f,n(g,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:d,configurable:!0}),d.displayName=s(f,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),s(g,u,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=_,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:_(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q.apply(this,arguments)}function K(e,t,r,n,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,o)}function V(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){K(a,n,o,i,u,"next",e)}function u(e){K(a,n,o,i,u,"throw",e)}i(void 0)}))}}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,X(n.key),n)}}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=$(e);if(t){var o=$(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return J(e)}(this,r)}}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function Y(e,t,r){return(t=X(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X(e){var t=function(e,t){if("object"!==q(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===q(t)?t:String(t)}var Z=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(s,t);var r,n,o,u=z(s);function s(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Y(J(t=u.call.apply(u,[this].concat(n))),"getHostGroups",V(H().mark((function e(){var r,n,o,a,i;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props,n=r.query,o=r.datasource,a=r.onChange,e.next=4,o.getHostGroups();case 4:(i=e.sent).length!==(n.hostGroups.length||0)&&a(Q({},n,{hostGroups:i}));case 6:case"end":return e.stop()}}),e)})))),Y(J(t),"getApplications",V(H().mark((function e(){var r,n,o,a,i;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props,n=r.query,o=r.datasource,a=r.onChange,e.next=4,o.getApplications();case 4:(i=e.sent).length!==(n.applications.length||0)&&a(Q({},n,{applications:i}));case 6:case"end":return e.stop()}}),e)})))),Y(J(t),"getWebApps",V(H().mark((function e(){var r,n,o,a,i;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props,n=r.query,o=r.datasource,a=r.onChange,e.next=4,o.getWebApps();case 4:(i=e.sent).length!==(n.webApps.length||0)&&a(Q({},n,{webApps:i}));case 6:case"end":return e.stop()}}),e)})))),Y(J(t),"getApplicationMetrics",V(H().mark((function e(){var r,n,o,a,i,u;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,o=n.query,a=n.datasource,i=n.onChange,e.next=4,a.getApplicationMetrics();case 4:(u=e.sent).length!==((null===(r=o.applicationMetrics)||void 0===r?void 0:r.length)||0)&&i(Q({},o,{applicationMetrics:u}));case 6:case"end":return e.stop()}}),e)})))),Y(J(t),"getIPMetrics",V(H().mark((function e(){var r,n,o,a,i,u;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,o=n.query,a=n.datasource,i=n.onChange,e.next=4,a.getIPMetrics();case 4:(u=e.sent).length!==((null===(r=o.ipMetrics)||void 0===r?void 0:r.length)||0)&&i(Q({},o,{ipMetrics:u}));case 6:case"end":return e.stop()}}),e)})))),Y(J(t),"getHostGroupMetrics",V(H().mark((function e(){var r,n,o,a,i,u;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,o=n.query,a=n.datasource,i=n.onChange,e.next=4,a.getHostGroupMetrics();case 4:(u=e.sent).length!==((null===(r=o.hostGroupMetrics)||void 0===r?void 0:r.length)||0)&&i(Q({},o,{hostGroupMetrics:u}));case 6:case"end":return e.stop()}}),e)})))),Y(J(t),"getWebAppMetrics",V(H().mark((function e(){var r,n,o,a,i,u;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,o=n.query,a=n.datasource,i=n.onChange,e.next=4,a.getWebAppMetrics();case 4:(u=e.sent).length!==((null===(r=o.webAppMetrics)||void 0===r?void 0:r.length)||0)&&i(Q({},o,{webAppMetrics:u}));case 6:case"end":return e.stop()}}),e)})))),Y(J(t),"getAlertColumns",V(H().mark((function e(){var r,n,o,a,i;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props,n=r.query,o=r.datasource,a=r.onChange,e.next=4,o.getAlertColumns();case 4:(i=e.sent).length!==(n.alertColumns.length||0)&&a(Q({},n,{alertColumns:i}));case 6:case"end":return e.stop()}}),e)})))),Y(J(t),"getTopMetrics",V(H().mark((function e(){var r,n,o,a,i,u;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props,n=r.query,o=r.datasource,a=r.onChange,e.next=4,o.getTopMetrics(n.sourceGroup);case 4:i=e.sent,n.top&&i.length!==((null===(u=n.topMetrics)||void 0===u?void 0:u.length)||0)&&a(Q({},n,{topMetrics:i}));case 6:case"end":return e.stop()}}),e)})))),Y(J(t),"getMetrics",V(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.getApplicationMetrics(),t.getIPMetrics(),t.getHostGroupMetrics(),t.getWebAppMetrics(),t.getTopMetrics();case 6:case"end":return e.stop()}}),e)})))),Y(J(t),"getOptions",(function(r){r===e.application&&(t.getApplications(),t.getApplicationMetrics()),r===e.hostGroup&&(t.getHostGroups(),t.getHostGroupMetrics()),r===e.webApp&&(t.getWebApps(),t.getWebAppMetrics()),r===e.ip&&t.getIPMetrics(),r===e.alerts&&t.getAlertColumns(),t.getTopMetrics()})),Y(J(t),"onSourceGroupChange",(function(e){var r=t.props,n=r.onChange,o=r.query,a=r.onRunQuery;e.value!==o.sourceGroup&&(t.getOptions(e.value),n(Q({},o,{sourceGroup:e.value})),a())})),Y(J(t),"onHostGroupChange",(function(e){var r,n=t.props,o=n.onChange,a=n.query,i=n.onRunQuery;e.value!==(null===(r=a.currentHostGroup)||void 0===r?void 0:r.value)&&(o(Q({},a,{currentHostGroup:e})),i())})),Y(J(t),"onApplicationChange",(function(e){var r,n=t.props,o=n.onChange,a=n.query,i=n.onRunQuery;e.value!==(null===(r=a.currentApplication)||void 0===r?void 0:r.value)&&(o(Q({},a,{currentApplication:e})),i())})),Y(J(t),"onWebAppChange",(function(e){var r,n=t.props,o=n.onChange,a=n.query,i=n.onRunQuery;e.value!==(null===(r=a.currentWebApp)||void 0===r?void 0:r.value)&&(o(Q({},a,{currentWebApp:e})),i())})),Y(J(t),"onIPChange",(function(e){var r=t.props,n=r.onChange,o=r.query,a=r.onRunQuery;n(Q({},o,{currentIP:e.target.value})),a()})),Y(J(t),"onApplicationMetricChange",(function(e){var r,n=t.props,o=n.onChange,a=n.query,i=n.onRunQuery;e.value!==(null===(r=a.currentApplicationMetric)||void 0===r?void 0:r.value)&&(o(Q({},a,{currentApplicationMetric:e})),i())})),Y(J(t),"onHostGroupMetricChange",(function(e){var r,n=t.props,o=n.onChange,a=n.query,i=n.onRunQuery;e.value!==(null===(r=a.currentHostGroupMetric)||void 0===r?void 0:r.value)&&(o(Q({},a,{currentHostGroupMetric:e})),i())})),Y(J(t),"onWebAppMetricChange",(function(e){var r,n=t.props,o=n.onChange,a=n.query,i=n.onRunQuery;e.value!==(null===(r=a.currentWebAppMetric)||void 0===r?void 0:r.value)&&(o(Q({},a,{currentWebAppMetric:e})),i())})),Y(J(t),"onIPMetricChange",(function(e){var r,n=t.props,o=n.onChange,a=n.query,i=n.onRunQuery;e.value!==(null===(r=a.currentIPMetric)||void 0===r?void 0:r.value)&&(o(Q({},a,{currentIPMetric:e})),i())})),Y(J(t),"onExpirationTimeChange",(function(e){var r=t.props,n=r.onChange,o=r.query,a=r.onRunQuery;n(Q({},o,{expirationTime:e.target.value})),a()})),Y(J(t),"onTopMetricChange",(function(e){var r,n=t.props,o=n.onChange,a=n.query,i=n.onRunQuery;e.value!==(null===(r=a.currentTopMetric)||void 0===r?void 0:r.value)&&(o(Q({},a,{currentTopMetric:e})),i())})),Y(J(t),"onTopChange",(function(e){var r=t.props,n=r.onChange,o=r.query,a=r.onRunQuery;n(Q({},o,{top:e.currentTarget.checked})),a()})),Y(J(t),"onTopGraphChange",(function(e){var r=t.props,n=r.onChange,o=r.query,a=r.onRunQuery;n(Q({},o,{topGraph:e.currentTarget.checked})),a()})),Y(J(t),"onTopNChange",(function(e){var r=t.props,n=r.onChange,o=r.query,a=r.onRunQuery;n(Q({},o,{topN:(0,N.toInteger)(e.currentTarget.value)})),a()})),Y(J(t),"onAliasChange",(function(e){var r=t.props,n=r.onChange,o=r.query,a=r.onRunQuery;n(Q({},o,{alias:e.target.value})),a()})),Y(J(t),"onTimeshiftChange",(function(e){var r=t.props,n=r.onChange,o=r.query,a=r.onRunQuery;n(Q({},o,{timeshift:e.target.value})),a()})),Y(J(t),"onGranularityChange",(function(e){var r=t.props,n=r.query,o=r.onChange,a=r.onRunQuery;o(Q({},n,{granularity:e})),a()})),Y(J(t),"onSSLColumnsChange",(function(e){var r=t.props,n=r.onChange,o=r.query,a=r.onRunQuery;n(Q({},o,{currentSSLKeyColumns:e})),a()})),Y(J(t),"onAlertsColumnsChange",(function(e){var r=t.props,n=r.onChange,o=r.query,a=r.onRunQuery;n(Q({},o,{currentAlertsColumns:e})),a()})),Y(J(t),"onAlertLimitChange",(function(e){var r=t.props,n=r.onChange,o=r.query,a=r.onRunQuery;n(Q({},o,{alertLimit:e.target.value})),a()})),t}return r=s,(n=[{key:"render",value:function(){var t,r,n,o,u=this,s=(0,N.defaults)(this.props.query,p);return this.getOptions(s.sourceGroup),G().createElement("div",{style:{width:"100%"}},G().createElement("div",{style:s.sourceGroup===e.hostGroup?{display:"block"}:{display:"none"}},G().createElement(M.InlineFieldRow,null,G().createElement(M.InlineField,{label:"Source Group"},G().createElement(M.Select,{width:"auto",menuShouldPortal:!0,options:a,value:s.sourceGroup,onChange:this.onSourceGroupChange})),G().createElement("div",{style:s.top?{display:"none"}:{display:"block"}},G().createElement(M.InlineField,{label:s.sourceGroup,onLoadStart:this.getHostGroups},G().createElement(M.Select,{width:"auto",menuShouldPortal:!0,value:s.currentHostGroup,options:s.hostGroups,onChange:this.onHostGroupChange}))),G().createElement(M.InlineField,{label:"Metric",onLoadStart:function(){return u.getHostGroupMetrics()}},G().createElement(M.Select,{width:"auto",menuShouldPortal:!0,options:s.hostGroupMetrics,value:s.currentHostGroupMetric,onChange:this.onHostGroupMetricChange}))),G().createElement(M.InlineFieldRow,null,G().createElement(M.InlineField,{label:"Top"},G().createElement("div",{style:{marginTop:"8px"}},G().createElement(M.Switch,{value:s.top,checked:s.top,onChange:this.onTopChange}))),G().createElement(M.InlineField,{disabled:!s.top,label:"N"},G().createElement(M.Input,{disabled:!s.top,width:16,value:s.topN||0,onChange:this.onTopNChange})),G().createElement(M.InlineField,{disabled:!s.top,label:"Graph"},G().createElement("div",{style:{marginTop:"8px"}},G().createElement(M.Switch,{disabled:!s.top,value:s.topGraph,checked:s.topGraph,onChange:this.onTopGraphChange}))),G().createElement(M.InlineField,{disabled:!(s.top&&s.topGraph),label:"Top Metric",onLoadStart:function(){return u.getTopMetrics()}},G().createElement(M.Select,{width:"auto",menuShouldPortal:!0,options:s.topMetrics,value:s.currentTopMetric,onChange:this.onTopMetricChange,disabled:!(s.top&&s.topGraph)}))),G().createElement(M.InlineFieldRow,null,G().createElement(M.InlineField,{label:"Granularity"},G().createElement(M.Select,{menuShouldPortal:!0,value:null===(t=s.granularity)||void 0===t?void 0:t.value,options:i,onChange:this.onGranularityChange})),G().createElement(M.InlineField,{label:"Alias"},G().createElement(M.Input,{value:s.alias||"",onChange:this.onAliasChange})))),G().createElement("div",{style:s.sourceGroup===e.application?{display:"block"}:{display:"none"}},G().createElement(M.InlineFieldRow,null,G().createElement(M.InlineField,{label:"Source Group"},G().createElement(M.Select,{width:"auto",menuShouldPortal:!0,options:a,value:s.sourceGroup,onChange:this.onSourceGroupChange})),G().createElement("div",{style:s.top?{display:"none"}:{display:"block"}},G().createElement(M.InlineField,{label:s.sourceGroup,onLoadStart:this.getApplications},G().createElement(M.Select,{width:"auto",menuShouldPortal:!0,value:s.currentApplication,options:s.applications,onChange:this.onApplicationChange}))),G().createElement(M.InlineField,{label:"Metric",onLoadStart:function(){return u.getApplicationMetrics()}},G().createElement(M.Select,{width:"auto",menuShouldPortal:!0,options:s.applicationMetrics,value:s.currentApplicationMetric,onChange:this.onApplicationMetricChange}))),G().createElement(M.InlineFieldRow,null,G().createElement(M.InlineField,{label:"Top"},G().createElement("div",{style:{marginTop:"8px"}},G().createElement(M.Switch,{value:s.top,checked:s.top,onChange:this.onTopChange}))),G().createElement(M.InlineField,{disabled:!s.top,label:"N"},G().createElement(M.Input,{disabled:!s.top,width:16,value:s.topN||0,onChange:this.onTopNChange})),G().createElement(M.InlineField,{disabled:!s.top,label:"Graph"},G().createElement("div",{style:{marginTop:"8px"}},G().createElement(M.Switch,{disabled:!s.top,value:s.topGraph,checked:s.topGraph,onChange:this.onTopGraphChange}))),G().createElement(M.InlineField,{disabled:!(s.top&&s.topGraph),label:"Top Metric",onLoadStart:function(){return u.getTopMetrics()}},G().createElement(M.Select,{width:"auto",menuShouldPortal:!0,options:s.topMetrics,value:s.currentTopMetric,onChange:this.onTopMetricChange,disabled:!(s.top&&s.topGraph)}))),G().createElement(M.InlineFieldRow,null,G().createElement(M.InlineField,{label:"Granularity"},G().createElement(M.Select,{menuShouldPortal:!0,value:null===(r=s.granularity)||void 0===r?void 0:r.value,options:i,onChange:this.onGranularityChange})),G().createElement(M.InlineField,{label:"Alias"},G().createElement(M.Input,{value:s.alias||"",onChange:this.onAliasChange})))),G().createElement("div",{style:s.sourceGroup===e.webApp?{display:"block"}:{display:"none"}},G().createElement(M.InlineFieldRow,null,G().createElement(M.InlineField,{label:"Source Group"},G().createElement(M.Select,{width:"auto",menuShouldPortal:!0,options:a,value:s.sourceGroup,onChange:this.onSourceGroupChange})),G().createElement("div",{style:s.top?{display:"none"}:{display:"block"}},G().createElement(M.InlineField,{label:s.sourceGroup,onLoadStart:this.getWebApps},G().createElement(M.Select,{width:"auto",menuShouldPortal:!0,value:s.currentWebApp,options:s.webApps,onChange:this.onWebAppChange}))),G().createElement(M.InlineField,{label:"Metric",onLoadStart:function(){return u.getWebAppMetrics()}},G().createElement(M.Select,{width:"auto",menuShouldPortal:!0,options:s.webAppMetrics,value:s.currentWebAppMetric,onChange:this.onWebAppMetricChange}))),G().createElement(M.InlineFieldRow,null,G().createElement(M.InlineField,{label:"Top"},G().createElement("div",{style:{marginTop:"8px"}},G().createElement(M.Switch,{value:s.top,checked:s.top,onChange:this.onTopChange}))),G().createElement(M.InlineField,{disabled:!s.top,label:"N"},G().createElement(M.Input,{disabled:!s.top,width:16,value:s.topN||0,onChange:this.onTopNChange})),G().createElement(M.InlineField,{disabled:!s.top,label:"Graph"},G().createElement("div",{style:{marginTop:"8px"}},G().createElement(M.Switch,{disabled:!s.top,value:s.topGraph,checked:s.topGraph,onChange:this.onTopGraphChange}))),G().createElement(M.InlineField,{disabled:!(s.top&&s.topGraph),label:"Top Metric",onLoadStart:function(){return u.getTopMetrics()}},G().createElement(M.Select,{width:"auto",menuShouldPortal:!0,options:s.topMetrics,value:s.currentTopMetric,onChange:this.onTopMetricChange,disabled:!(s.top&&s.topGraph)}))),G().createElement(M.InlineFieldRow,null,G().createElement(M.InlineField,{label:"Granularity"},G().createElement(M.Select,{menuShouldPortal:!0,value:null===(n=s.granularity)||void 0===n?void 0:n.value,options:i,onChange:this.onGranularityChange})),G().createElement(M.InlineField,{label:"Alias"},G().createElement(M.Input,{value:s.alias||"",onChange:this.onAliasChange})))),G().createElement("div",{style:s.sourceGroup===e.ip?{display:"block"}:{display:"none"}},G().createElement(M.InlineFieldRow,null,G().createElement(M.InlineField,{label:"Source Group"},G().createElement(M.Select,{width:"auto",menuShouldPortal:!0,options:a,value:s.sourceGroup,onChange:this.onSourceGroupChange})),G().createElement("div",{style:s.top?{display:"none"}:{display:"block"}},G().createElement(M.InlineField,{label:s.sourceGroup},G().createElement(M.Input,{value:s.currentIP,onChange:this.onIPChange}))),G().createElement(M.InlineField,{label:"Metric",onLoadStart:function(){return u.getIPMetrics()}},G().createElement(M.Select,{width:"auto",menuShouldPortal:!0,options:s.ipMetrics,value:s.currentIPMetric,onChange:this.onIPMetricChange}))),G().createElement(M.InlineFieldRow,null,G().createElement(M.InlineField,{disabled:!s.top,label:"Top"},G().createElement("div",{style:{marginTop:"8px"}},G().createElement(M.Switch,{value:s.top,checked:s.top,onChange:this.onTopChange}))),G().createElement(M.InlineField,{disabled:!s.top,label:"N"},G().createElement(M.Input,{disabled:!s.top,width:16,value:s.topN||0,onChange:this.onTopNChange})),G().createElement(M.InlineField,{disabled:!s.top,label:"Graph"},G().createElement("div",{style:{marginTop:"8px"}},G().createElement(M.Switch,{disabled:!s.top,value:s.topGraph,checked:s.topGraph,onChange:this.onTopGraphChange}))),G().createElement(M.InlineField,{disabled:!(s.top&&s.topGraph),label:"Top Metric",onLoadStart:function(){return u.getTopMetrics()}},G().createElement(M.Select,{width:"auto",menuShouldPortal:!0,options:s.topMetrics,value:s.currentTopMetric,onChange:this.onTopMetricChange,disabled:!(s.top&&s.topGraph)}))),G().createElement(M.InlineFieldRow,null,G().createElement(M.InlineField,{label:"Granularity"},G().createElement(M.Select,{menuShouldPortal:!0,value:null===(o=s.granularity)||void 0===o?void 0:o.value,options:i,onChange:this.onGranularityChange})),G().createElement(M.InlineField,{label:"Alias"},G().createElement(M.Input,{value:s.alias||"",onChange:this.onAliasChange})))),G().createElement("div",{style:s.sourceGroup===e.ssl?{display:"block"}:{display:"none"}},G().createElement(M.InlineFieldRow,null,G().createElement(M.InlineField,{label:"Source Group"},G().createElement(M.Select,{width:"auto",menuShouldPortal:!0,options:a,value:s.sourceGroup,onChange:this.onSourceGroupChange})),G().createElement(M.InlineField,{label:"If expiration time is less than",tooltip:"Write -1 for all"},G().createElement(M.Input,{value:s.expirationTime,onChange:this.onExpirationTimeChange}))),G().createElement(M.InlineFieldRow,null,G().createElement(M.InlineField,{label:"Columns"},G().createElement(M.MultiSelect,{width:"auto",menuShouldPortal:!0,options:l,value:s.currentSSLKeyColumns,onChange:this.onSSLColumnsChange})))),G().createElement("div",{style:s.sourceGroup===e.alerts?{display:"block"}:{display:"none"}},G().createElement(M.InlineFieldRow,null,G().createElement(M.InlineField,{label:"Source Group"},G().createElement(M.Select,{width:"auto",menuShouldPortal:!0,options:a,value:s.sourceGroup,onChange:this.onSourceGroupChange})),G().createElement(M.InlineField,{label:"Limit",tooltip:"Max. number of alert to get"},G().createElement(M.Input,{value:s.alertLimit,onChange:this.onAlertLimitChange}))),G().createElement(M.InlineFieldRow,null,G().createElement(M.InlineField,{label:"Columns"},G().createElement(M.MultiSelect,{width:"auto",menuShouldPortal:!0,options:s.alertColumns,value:s.currentAlertsColumns,onChange:this.onAlertsColumnsChange})))))}}])&&B(r.prototype,n),o&&B(r,o),Object.defineProperty(r,"prototype",{writable:!1}),s}(A.PureComponent),ee=new t.DataSourcePlugin(_).setConfigEditor(D).setQueryEditor(Z)})(),s})()));
//# sourceMappingURL=module.js.map